<!-- /_includes/masthead.html -->
<header class="mpsg-header" role="banner" data-mpsg-masthead>
  <div class="mpsg-inner">
    <a class="mpsg-brand" href="{{ '/' | relative_url }}">
      {% if site.logo %}<img src="{{ site.logo | relative_url }}" alt="{{ site.title }} logo">{% endif %}
      <span>{{ site.title }}</span>
    </a>

    <nav id="mpsg-site-nav" class="mpsg-nav" aria-label="Main navigation">
      <ul class="mpsg-menu" data-mpsg-menu role="menubar">
        {% assign links = site.data.navigation.main | default: site.navigation %}
        {% for link in links %}
        {% assign has_children = link.children and link.children.size > 0 %}
        <li class="mpsg-item{% if has_children %} mpsg-item--has-children{% endif %}" role="none">
          {% if has_children %}
          <button class="mpsg-btn mpsg-submenu-toggle" type="button" aria-haspopup="true" aria-expanded="false"
            aria-controls="mpsg-submenu-{{ forloop.index }}">
            <span>{{ link.title }}</span><span class="mpsg-chevron" aria-hidden="true"></span>
            <span class="mpsg-sr">Toggle {{ link.title }} submenu</span>
          </button>
          <ul id="mpsg-submenu-{{ forloop.index }}" class="mpsg-submenu" role="menu">
            {% for child in link.children %}
            <li role="none"><a class="mpsg-link" role="menuitem" href="{{ child.url | relative_url }}" {% if
                child.url==page.url %}aria-current="page" {% endif %}>{{ child.title }}</a></li>
            {% endfor %}
          </ul>
          {% else %}
          <a class="mpsg-link" href="{{ link.url | relative_url }}" {% if link.url==page.url %}aria-current="page" {%
            endif %}>{{ link.title }}</a>
          {% endif %}
        </li>
        {% endfor %}
      </ul>
    </nav>

    <button class="mpsg-toggle" id="mpsg-nav-toggle" type="button" aria-controls="mpsg-site-nav" aria-expanded="false"
      aria-label="Open menu">
      <span class="mpsg-toggle-bar" aria-hidden="true"></span>
      <span class="mpsg-sr">Menu</span>
    </button>
  </div>
</header>

<script defer src="{{ '/assets/js/custom_nav.js' | relative_url }}"></script>